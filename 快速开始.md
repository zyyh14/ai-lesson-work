# 🚀 AI备课系统 - 快速开始指南

## 📋 项目状态

✅ **项目可以正常运行**，但需要完成以下配置步骤。

---

## ⚡ 三步启动

### 第一步：配置API密钥 ⚠️ 必需

编辑 `python_service/.env` 文件，填入你的API密钥：

```bash
# 必需配置（Python服务无法启动如果缺少这些）
SUPABASE_URL=你的Supabase项目URL
SUPABASE_KEY=你的Supabase API密钥
ZHIPU_API_KEY=你的智谱AI密钥

# 可选配置
OPENAI_API_KEY=0e420f1b-15e6-47d2-adf3-ef8987c1a9ca
```

**如何获取这些密钥？**
- **Supabase**: 访问 https://supabase.com 创建项目，在项目设置中获取URL和API密钥
- **智谱AI**: 访问 https://open.bigmodel.cn 注册并获取API密钥

---

### 第二步：安装依赖

在项目根目录运行：

```powershell
.\安装依赖.ps1
```

这个脚本会自动安装：
- Python依赖（FastAPI、LangChain等）
- 三个前端模块的Node.js依赖
- 自动处理Node.js版本兼容性问题

**或者手动安装：**
```powershell
# Python依赖
cd python_service
pip install -r requirements.txt
cd ..

# 前端依赖
cd frontend\modules\ppt
npm install --legacy-peer-deps
cd ..\..\..

cd frontend\modules\lessonplan
npm install --legacy-peer-deps
cd ..\..\..

cd frontend\modules\resource
npm install
cd ..\..\..
```

---

### 第三步：启动服务

在项目根目录运行：

```powershell
.\一键启动.ps1
```

这个脚本会自动在多个窗口中启动所有5个服务。

**或者手动启动（需要5个终端窗口）：**

```powershell
# 窗口1: Python服务
cd python_service
python start.py

# 窗口2: Spring Boot服务
cd backend
mvn spring-boot:run

# 窗口3: PPT模块
cd frontend\modules\ppt
npm run dev

# 窗口4: 教案模块
cd frontend\modules\lessonplan
npm run dev

# 窗口5: 资源管理模块
cd frontend\modules\resource
npm run dev
```

---

## 🌐 访问地址

启动完成后（约30-60秒），访问以下地址：

| 服务 | 地址 | 说明 |
|------|------|------|
| Python API文档 | http://localhost:5000/docs | FastAPI自动生成的API文档 |
| Spring Boot后端 | http://localhost:8081 | 后端服务健康检查 |
| PPT模块 | http://localhost:3001 | PPT导入和AI生成功能 |
| 教案模块 | http://localhost:3000 | 教案生成和管理 |
| 资源管理模块 | http://localhost:3002 | 教学资源管理 |

---

## ⚠️ 常见问题

### 1. Python服务启动失败：ValidationError

**原因**：`python_service/.env` 文件未配置或配置不完整。

**解决**：确保填写了 `SUPABASE_URL`、`SUPABASE_KEY` 和 `ZHIPU_API_KEY`。

---

### 2. npm install 报错：peer dependency conflicts

**原因**：Node.js版本较新，与某些依赖不兼容。

**解决**：使用 `npm install --legacy-peer-deps`（安装脚本已自动处理）。

---

### 3. 端口被占用

**解决**：
```powershell
# 查找占用端口的进程
netstat -ano | findstr :8081

# 结束进程
taskkill /PID <进程ID> /F
```

---

### 4. Node.js版本警告

**当前系统**：Node.js v24.12.0  
**项目建议**：Node.js v16.20.2

**影响**：可能导致某些依赖不兼容，但使用 `--legacy-peer-deps` 可以解决大部分问题。

**建议**：如果遇到问题，使用nvm切换到Node.js 16：
```powershell
# 安装nvm-windows后
nvm install 16.20.2
nvm use 16.20.2
```

---

## 📚 详细文档

- **完整启动指南**：`startrunning.md`
- **问题诊断报告**：`启动检查和修复.md`
- **项目功能说明**：`README.md`
- **API配置说明**：`配置.md`

---

## 🎯 项目架构

```
前端层
├── PPT模块 (:3001)          - PPT导入、AI生成、可视化编辑
├── 教案模块 (:3000)         - 教案生成、AI辅助
└── 资源管理模块 (:3002)     - 教学资源管理

后端层
├── Spring Boot (:8081)     - 主后端服务、课件存储、PPT处理
└── Python FastAPI (:5000)  - AI资源推荐、智能搜索

数据层
├── H2数据库                - 课件和教案数据
└── Supabase               - 教学资源数据
```

---

## ✅ 检查清单

在启动前，确保：

- [ ] 已安装 Python 3.x
- [ ] 已安装 Node.js（建议v16，当前v24也可用）
- [ ] 已安装 Maven 和 Java 8
- [ ] 已配置 `python_service/.env` 文件
- [ ] 已运行 `.\安装依赖.ps1` 或手动安装所有依赖
- [ ] 端口 5000、8081、3000、3001、3002 未被占用

---

## 🆘 需要帮助？

如果遇到问题：

1. 查看 `启动检查和修复.md` 中的详细诊断
2. 检查各服务窗口的错误日志
3. 确认所有API密钥已正确配置
4. 确认所有依赖已成功安装

---

**祝使用愉快！** 🎉
